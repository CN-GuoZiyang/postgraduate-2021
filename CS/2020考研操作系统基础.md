### 操作系统的基本概念

#### 概念（定义）

操作系统是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配，以提供给用户和其它软件方便的接口和环境，它是计算机系统中最基本的系统软件。

1. 操作系统是系统资源的管理者
2. 向上层提供方便易用的服务
3. 是最接近硬件的一层软件

#### 功能和目标

##### 作为系统资源的管理者

1. 处理器管理
2. 存储器管理
3. 文件管理
4. 设备管理

##### 向上层提供方便易用的服务

封装思想，将底层的硬件功能封装成简单易用的服务

提供的服务：

- GUI（Graphical User Interface）
- 命令接口，联机命令接口和脱机命令接口。联机命令接口=交互式命令接口，脱机命令接口=批处理命令接口
- 程序接口，即系统调用，只能通过程序代码间接使用

有时，命令接口和程序接口统称为用户接口

##### 最接近硬件的层次

需要实现对硬件机器的拓展。

没有任何软件支持的计算机称为裸机，覆盖了软件的机器称为扩充机器，或虚拟机。

#### 四个特征

并发，共享，虚拟，异步。

并发和共享是两个最基本的特征，互为存在条件

##### 并发

两个或多个事件在同一时间间隔内发生，这些事件在宏观上同时，在微观上交替

并行是同时发生

操作系统的并发性指计算机同时运行着多个程序，操作系统是伴随着“多道程序技术”出现的，因此操作系统和程序并发是一起诞生的。

注意：单核CPU同一时刻只能执行一个程序，程序只能并发执行；多核CPU同一时刻克同时执行多个程序，程序可以并行地执行。

并发性是操作系统的基本特性

##### 共享

资源共享，系统资源可供内存中多个并发执行的进程共同使用。

两种方式：互斥共享方式和同时共享方式

互斥共享方式：一个时间段内只允许一个进程访问该资源。

同时共享方式：允许一个时间段内多个进程“同时”（宏观上）对它们进行访问。

##### 并发与共享的关系

如果失去并发性，则系统只用一个程序正在运行，则共享性失去存在的意义

如果失去共享性，则不通程序无法同时使用资源，无法实现并发

##### 虚拟

把物理上的实体变为若干逻辑上的对应物，物理实体是实际存在的，逻辑对应物是用户感受到的。

如虚拟处理器技术（时分复用技术）和虚拟存储器技术（空分复用技术）

没有并发性，谈不上虚拟性

##### 异步

在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进。

只有系统拥有并发性，才有可能导致异步性。

### 操作系统的发展与分类

#### 手工操作阶段

打孔程序，装取纸带、读写纸带速度慢，计算速度快，用户独占，资源效率低下

#### 批处理阶段

##### 单道批处理系统

引入脱机输入/输出技术（外围机+磁带），由监督程序负责控制作业的输入输出

计算机直接向磁带上IO，速度快

监督程序是操作系统的雏形

内存中只有一道程序在运行，CPU有大量的时间在等待IO

##### 多道批处理系统

操作系统诞生

计算的同时可以进行IO，支持多道程序并发允许

没有人机交互功能，响应时间长

#### 分时操作系统

计算机以时间片为单位轮流给各个用户/作业服务，各个用户可通过终端与计算机交互

用户请求可以被即时响应，解决了人际交互的问题，用户操作相对独立

不能有限处理一些紧急任务

#### 实时操作系统

能优先响应一些紧急的任务，某些紧急任务不需要时间片排队

计算机系统接收到外部信号后及时进行处理，且要在严格的时限内处理完事件

及时性和可靠性

#### 其它操作系统

网络操作系统，分布式操作系统，个人计算机操作系统

### 操作系统的运行机制

#### 内核程序 VS 应用程序

普通程序就是应用程序

为了实现操作系统而编写的程序称为内核程序，内核程序组成操作系统内核，简称内核，内核是操作系统最重要最核心的部分，也是最接近硬件的部分

Docker -> 仅需Linux内核

内核作为管理者，可能会让CPU执行特权指令，如：内存清零指令，这些指令只允许内核使用。CPU在设计和生产时已经划分了特权与非特权指令，CPU在执行一条指令前就能判断其类型。

#### 内核态 VS 用户态

